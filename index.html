<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tarot Synthesizer</title>
   <style>
    * {
        box-sizing: border-box;
    }

   body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    /* Fondo GIF a pantalla completa */
    background: #000 url("fondo.gif") center center / cover no-repeat fixed;
    color: #65f604;
    font-family: "Fira Code", "Courier New", monospace;
    display: flex;
    align-items: center;
    justify-content: center;
}



    .auth-wrapper {
        position: relative;
        max-width: 420px;
        width: 100%;
        padding: 26px 24px 22px;
        border-radius: 10px;
        background: rgba(3, 3, 3, 0.96);
        border: 1px solid rgba(246, 197, 4, 0.4);
        box-shadow:
            0 0 0 1px rgba(246, 197, 4, 0.08),
            0 18px 40px rgba(0, 0, 0, 0.9);
        background-image:
            linear-gradient(
                rgba(255, 255, 255, 0.03) 1px,
                transparent 1px
            );
        background-size: 100% 3px;
    }

    .auth-wrapper::before {
        content: "[ TAROT SYNTHESIZER :: ACCESS ]";
        position: absolute;
        top: 6px;
        left: 10px;
        font-size: 9px;
        color: #00ff00;
        opacity: 0.9;
    }

    h1 {
        margin: 10px 0 8px;
        font-size: 18px;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        text-align: center;
        color: #04f604;
    }

    p.sub {
        margin: 0 0 20px;
        font-size: 11px;
        text-align: center;
        color: #5bb576;
        text-transform: uppercase;
    }

    label {
        display: block;
        font-size: 11px;
        margin-bottom: 3px;
        color: #aff4a0;
        text-transform: uppercase;
    }

    input {
        width: 100%;
        padding: 7px 9px;
        border-radius: 4px;
        border: 1px solid #3a3216;
        background: #050505;
        color: #40f604;
        font-size: 12px;
        outline: none;
        font-family: "Courier New", Courier, monospace;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.8);
        transition: border-color 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
        margin-bottom: 12px;
    }

    input::placeholder {
        color: #6c5f2c;
        font-size: 11px;
    }

    input:focus {
        border-color: #40f604;
        background: #080808;
        box-shadow:
            0 0 0 1px rgba(246, 197, 4, 0.35),
            0 0 10px rgba(246, 197, 4, 0.18);
    }

    button {
        width: 100%;
        padding: 9px 11px;
        border-radius: 999px;
        border: 1px solid #66ff00;
        background: linear-gradient(90deg, #9b82ce, #0426ff);
        color: #020202;
        font-weight: 700;
        font-size: 11px;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        cursor: pointer;
        margin-top: 4px;
        font-family: "Courier New", monospace;
        box-shadow:
            0 0 0 1px rgba(0, 0, 0, 0.8),
            0 12px 26px rgba(0, 0, 0, 0.8);
        transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
    }

    button:hover {
        filter: brightness(1.05);
        transform: translateY(-1px);
        box-shadow:
            0 0 0 1px rgba(0, 0, 0, 0.8),
            0 16px 32px rgba(0, 0, 0, 0.9);
    }

    button:active {
        transform: translateY(1px);
        box-shadow:
            0 8px 20px rgba(0, 0, 0, 0.8);
    }

    .error {
        margin-top: 10px;
        font-size: 11px;
        color: #ff6666;
        min-height: 14px;
        font-family: "Courier New", Courier, monospace;
        white-space: pre-line;
    }

    .loading {
        opacity: 0.5;
        pointer-events: none;
        filter: grayscale(0.3);
    }

    .auth-footnote {
        margin-top: 14px;
        font-size: 10px;
        color: #7a6b30;
        text-align: center;
        text-transform: uppercase;
    }

    .auth-footnote span {
        color: #91f604;
    }

    /* ==== BLOQUE PAYPAL (SUSCRIPCIÓN) ===== */
    .paypal-block {
        margin-top: 18px;
        padding-top: 12px;
        border-top: 1px dashed rgba(101, 246, 4, 0.35);
    }

    .paypal-label {
        font-size: 10px;
        text-align: center;
        text-transform: uppercase;
        color: #5bb576;
        margin-bottom: 8px;
    }

    #paypal-button-container-P-6GY75953W2060241PNERGRHY {
        display: flex;
        justify-content: center;
    }
   </style>
</head>
<body>
    <div class="auth-wrapper">
        <h1>Tarot Synthesizer</h1>
        <p class="sub">Acceso al bosque obscuro</p>

        <!-- ====== LOGIN FIREBASE ====== -->
        <form id="auth-form">
            <label for="email">Correo</label>
            <input type="email" id="email" autocomplete="email" required>

            <label for="password">Contraseña</label>
            <input type="password" id="password" autocomplete="current-password" required>

            <button type="submit" id="login-btn">Entrar</button>
        </form>

        <div class="error" id="auth-error"></div>

        <!-- ====== PAYPAL SUSCRIPCIÓN MENSUAL ====== -->
        <div class="paypal-block">
            <div class="paypal-label">
                o suscríbete 1 usd mensual para mantener abierto el portal y acceder a actualizaciones, mundos por venir, etc.
            </div>
            <div id="paypal-button-container-P-6GY75953W2060241PNERGRHY"></div>
        </div>

        <div class="auth-footnote">
            [ session <span>tarot</span> // level: access ]
        </div>
    </div>

    <!-- ========= FIREBASE AUTH (MÓDULOS) ========= -->
    <script type="module">
        import { initializeApp }   from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { 
            getAuth,
            signInWithEmailAndPassword
        } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

        const TARGET_URL = 'arcano.html'; // cambia si tu página principal tiene otro nombre

        const firebaseConfig = {
            apiKey: "AIzaSyARA9tqBfkiFK80XcaWtS1ar6yglfmEh3g",
            authDomain: "artepsique-9ced7.firebaseapp.com",
            projectId: "artepsique-9ced7",
            storageBucket: "artepsique-9ced7.appspot.com",
            messagingSenderId: "269569252943",
            appId: "1:269569252943:web:b185a96dee1ff30ab2d43a"
        };

        const app  = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const form      = document.getElementById('auth-form');
        const emailIn   = document.getElementById('email');
        const passIn    = document.getElementById('password');
        const errorBox  = document.getElementById('auth-error');
        const loginBtn  = document.getElementById('login-btn');
        const wrapper   = document.querySelector('.auth-wrapper');

        function setLoading(state) {
            if (state) {
                wrapper.classList.add('loading');
                loginBtn.textContent = 'Entrando...';
            } else {
                wrapper.classList.remove('loading');
                loginBtn.textContent = 'Entrar';
            }
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            errorBox.textContent = '';
            setLoading(true);

            const email = emailIn.value.trim();
            const pass  = passIn.value;

            try {
                await signInWithEmailAndPassword(auth, email, pass);
                window.location.replace(TARGET_URL);
            } catch (err) {
                console.error(err);
                let msg = 'Error al iniciar sesión.';
                if (err.code === 'auth/wrong-password' || err.code === 'auth/invalid-credential') {
                    msg = 'Correo o contraseña incorrectos.';
                } else if (err.code === 'auth/user-not-found') {
                    msg = 'Ese usuario no existe.';
                } else if (err.code === 'auth/too-many-requests') {
                    msg = 'Demasiados intentos. Espera un momento.';
                }
                errorBox.textContent = msg;
            } finally {
                setLoading(false);
            }
        });
    </script>

    <!-- ========= SDK PAYPAL (SUSCRIPCIÓN) ========= -->
    <script src="https://www.paypal.com/sdk/js?client-id=AR--VJI6G8IODBLGlCm85cWlHmImuBOro-PLF0he-FUfRCQJGpfd0MXMsIEVdLFvkE7trWlAxX585hEk&vault=true&intent=subscription" data-sdk-integration-source="button-factory"></script>

    <script>
      if (window.paypal) {
        paypal.Buttons({
            style: {
                shape: 'pill',
                color: 'gold',
                layout: 'vertical',
                label: 'subscribe'
            },
            createSubscription: function(data, actions) {
              return actions.subscription.create({
                plan_id: 'P-6GY75953W2060241PNERGRHY'
              });
            },
            onApprove: function(data, actions) {
              // Aquí decides qué pasa tras la suscripción mensual
              console.log("Sub ID:", data.subscriptionID);
              // Redirige al Tarot Synthesizer
              window.location.replace('arcano.html?sub=1');
            }
        }).render('#paypal-button-container-P-6GY75953W2060241PNERGRHY');
      } else {
        console.warn("PayPal SDK no se cargó correctamente.");
      }
    </script>
</body>
</html>

